---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
const title = "Industrias Polyvac";
const description = "Inicio de la pagina.";

import CategoryCard from "../components/CategoryCard.astro";
import ProductCardSmall from "../components/ProductCardSmall.astro";

import bgHero from "../assets/hero/test.png";
import logoHero from "../assets/hero/logohero.png";
import Badge from "../components/Badge.astro";
import oekotexLogo from '../assets/acercade/oekotex.png';
import bluesignLogo from '../assets/acercade/bluesign.png';  
import bureauVeritasLogo from '../assets/acercade/bureau.png';

// Importar funciones de Strapi
import { getCategorias, getProductosDestacados, getStrapiMedia } from '../lib/strapi.js';

// Fetch datos reales de Strapi
const categoriasResponse = await getCategorias();
const productosDestacadosResponse = await getProductosDestacados();

const categorias = categoriasResponse.data || [];
const productosDestacados = productosDestacadosResponse.data || [];
---

<Layout title={title} description={description}>
    <section class="relative w-full h-[488px]" id="home">
        <!-- hero section -->
        <div class="absolute inset-0">
            <Image
                src={bgHero}
                alt="Background Image"
                class="object-cover object-center w-full h-full"
                style="z-index: -1;"
            />
        </div>
        <div class="absolute inset-0 bg-black opacity-40"></div>
        
        <div class="absolute inset-9 flex flex-col md:flex-row font-fuenteprincipal">
            <div class="h-1/2 md:w-1/2 mb-4 md:mb-0">
                <h1
                    class="text-white font-bold text-2xl md:text-3xl xl:text-5xl p-6 md:p-10 leading-tight"
                >
                    Empresa dedicada a la fabricación y distribución de tintas
                    para impresión textil
                </h1>
                <a
                    href="/acerca"
                    class="m-6 md:m-10 px-7 py-3 bg-azulprimario text-white text-lg md:text-xl font-medium
                hover:bg-blue-800
                transition duration-200"
                    >Conócenos
                    <svg
                        class="inline-flex ml-3 w-7 h-7 fill-white"
                        viewBox="0 0 20 11"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M0.628662 5.5C0.628662 5.16249 0.925718 4.88889 1.29215 4.88889H16.9411L12.7659 1.04323C12.5067 0.80458 12.5067 0.417645 12.7659 0.178991C13.0249 -0.0596635 13.4451 -0.0596635 13.7041 0.178991L19.0121 5.06788C19.2712 5.30653 19.2712 5.69347 19.0121 5.93212L13.7041 10.821C13.4451 11.0597 13.0249 11.0597 12.7659 10.821C12.5067 10.5824 12.5067 10.1954 12.7659 9.9568L16.9411 6.11111H1.29215C0.925718 6.11111 0.628662 5.83751 0.628662 5.5Z"
                        ></path>
                    </svg>
                </a>
            </div>
            <div
                class="flex justify-center items-center h-full md:h-auto md:w-1/2"
            >
                <Image
                    src={logoHero}
                    alt="Logo"
                    class="h-auto md:h-auto w-auto"
                />
            </div>
        </div>
    </section>

    <!-- Sección de cards de categorias -->
    <Badge text="Nuestros Productos"/>

    {categorias.map((categoria, index) => (
        <CategoryCard
            imageUrl={getStrapiMedia(categoria.imagen?.url)}
            altText={categoria.imagen?.alternativeText || `Imagen de ${categoria.nombre}`}
            title={categoria.nombre}
            description={categoria.descripcion}
            buttonLabel={`Ver tintas para ${categoria.nombre}`}
            buttonHref={`/categoria/${categoria.slug}`}
            position={index % 2 === 0 ? "right" : "left"}
        />
    ))}

    <Badge text="Productos destacados" />

    <!-- Sección de productos destacados -->
    <div class="mx-auto max-w-7xl px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {productosDestacados.map(producto => (
                <ProductCardSmall
                    imageUrl={getStrapiMedia(producto.imagen?.url)}
                    altText={producto.imagen?.alternativeText || `Imagen de ${producto.nombre}`}
                    title={producto.nombre}
                    buttonLabel="Ver Producto"
                    buttonHref={`/producto/${producto.slug}`}
                    categoryColor={producto.categoria?.Color || "#3B82F6"}
                />
            ))}
        </div>
    </div>

    <!-- Certificaciones -->
        <section class="bg-gray-900 py-16 mt-15">
            <div class="max-w-7xl mx-auto px-4">
                <h2 class="text-3xl font-bold text-center text-white mb-8">CERTIFICACIONES Y NORMAS</h2>
                <p class="text-center text-gray-300 mb-12 max-w-3xl mx-auto">
                    Todos nuestros productos cumplen con las normas requeridas por:
                </p>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <!-- OEKOTEX 2024 -->
                    <div class="text-white">
                        <div class="mb-4">
                            <div class="w-32 h-32 bg-white rounded-lg flex items-center justify-center mx-auto mb-4 p-4">
                                <Image 
                                    src={oekotexLogo} 
                                    alt="Logo OEKOTEX 2024" 
                                    class="w-full h-full object-contain"
                                />
                            </div>
                            <h3 class="text-xl font-bold text-green-400">OEKOTEX</h3>
                            <h3 class="text-lg font-bold text-white">2024</h3>
                            <p class="text-sm text-gray-300 mt-2">Estándar internacional para textiles libres de sustancias nocivas</p>
                        </div>
                    </div>

                    <!-- BLUESIGN -->
                    <div class="text-white">
                        <div class="mb-4">
                            <div class="w-32 h-32 bg-white rounded-lg flex items-center justify-center mx-auto mb-4 p-4">
                                <Image 
                                    src={bluesignLogo} 
                                    alt="Logo Bluesign" 
                                    class="w-full h-full object-contain"
                                />
                            </div>
                            <h3 class="text-xl font-bold text-blue-400">BLUESIGN</h3>
                            <h3 class="text-lg font-bold text-white">APPROVED</h3>
                            <p class="text-sm text-gray-300 mt-2">Sistema de gestión para una producción textil sostenible</p>
                        </div>
                    </div>

                    <!-- BUREAU VERITAS -->
                    <div class="text-white">
                        <div class="mb-4">
                            <div class="w-32 h-32 bg-white rounded-lg flex items-center justify-center mx-auto mb-4 p-4">
                                <Image 
                                    src={bureauVeritasLogo} 
                                    alt="Logo Bureau Veritas" 
                                    class="w-full h-full object-contain"
                                />
                            </div>
                            <h3 class="text-xl font-bold text-red-400">BUREAU</h3>
                            <h3 class="text-xl font-bold text-red-400">VERITAS</h3>
                            <p class="text-sm text-gray-300 mt-2">Líder mundial en servicios de inspección, certificación y ensayos</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
</Layout>
