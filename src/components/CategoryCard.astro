---
import { Image, inferRemoteSize } from "astro:assets";

const {
  imageUrl,
  altText = "",
  title,
  description,
  buttonLabel = "Ver Categoría",
  buttonHref = "#",
  position = "left",
} = Astro.props;

// Obtener dimensiones automáticamente de la imagen remota
const { width, height } = await inferRemoteSize(imageUrl);
---

<!-- Contenedor principal -->
<div class="mx-auto max-w-7xl px-4 py-8 font-fuenteprincipal">
  <!-- Usamos flex-col por defecto (móvil) y flex-row en md (pantallas medianas) -->
  <div class="flex flex-col md:flex-row items-stretch h-max">
    <!-- Imagen -->
    <div
      class={`
          w-full md:w-1/2 h-auto   
          ${position === "right" ? "md:order-2" : "md:order-1"}
          order-1  /* Por defecto, en móvil, va debajo del texto */
        `}
    >
      <Image 
        src={imageUrl} 
        alt={altText || `Imagen de ${title || 'Categoría'}`}
        width={width}
        height={height}
        format="webp"
        class="w-full h-full object-cover" 
      />
    </div>

    <!-- Texto y botón -->
    <div
      class={`
          w-full md:w-1/2 bg-grisbg h-auto flex flex-col justify-between  items-start
          ${position === "right" ? "md:order-1" : "md:order-2"}
          order-2  /* Por defecto, en móvil, va encima de la imagen */
          md:mt-0 p-8
        `}
    >
      <h2
        class="text-2xl md:text-4xl lg:text-6xl text-azulsecundario font-regular mb-2"
      >
        <span class="font-bold">{title}</span>
      </h2>
      {description && (
        <p class="mb-5 text-1xl md:text-2xl md:text-3xl text-azulsecundario">
          {description}
        </p>
      )}
      {buttonHref && (
        <a
          href={buttonHref}
          class="inline-flex items-center bg-azulprimario text-white text-lg md:text-xl px-8 py-4 hover:bg-blue-700 transition"
        >
          {buttonLabel}
          <svg class="inline-flex ml-3 w-6 h-6 fill-white" viewBox="0 0 20 11">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0.628662 5.5C0.628662 5.16249 0.925718 4.88889 1.29215 4.88889H16.9411L12.7659 1.04323C12.5067 0.80458 12.5067 0.417645 12.7659 0.178991C13.0249 -0.0596635 13.4451 -0.0596635 13.7041 0.178991L19.0121 5.06788C19.2712 5.30653 19.2712 5.69347 19.0121 5.93212L13.7041 10.821C13.4451 11.0597 13.0249 11.0597 12.7659 10.821C12.5067 10.5824 12.5067 10.1954 12.7659 9.9568L16.9411 6.11111H1.29215C0.925718 6.11111 0.628662 5.83751 0.628662 5.5Z"
            ></path>
          </svg>
        </a>
      )}
    </div>
  </div>
</div>
