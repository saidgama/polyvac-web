---
import { Image, inferRemoteSize } from "astro:assets";

// Recibe el título dinámico como prop
const { imageUrl, titulo } = Astro.props;

// Detectar si es una imagen remota (URL string) o local (objeto Image de Astro)
const isRemoteImage = typeof imageUrl === 'string' && (imageUrl.startsWith('http') || imageUrl.startsWith('/'));
const isLocalImage = typeof imageUrl === 'object' && imageUrl.src;

let width, height;

// Solo obtener dimensiones para imágenes remotas
if (isRemoteImage) {
  try {
    const dimensions = await inferRemoteSize(imageUrl);
    width = dimensions.width;
    height = dimensions.height;
  } catch (error) {
    console.warn('Error getting remote image dimensions:', error);
    // Usar dimensiones por defecto si falla
    width = 1200;
    height = 600;
  }
}
---
<!-- section -->
<section class="relative w-full h-[150px] md:h-[280px]" >
    <div class="absolute inset-0">
        {isRemoteImage ? (
            <Image
                src={imageUrl}
                alt={`Banner de ${titulo || 'página'}`}
                width={width || 1200}
                height={height || 600}
                format="webp"
                class="object-cover object-center w-full h-full"
                style="z-index: -1;"
            />
        ) : isLocalImage ? (
            <Image
                src={imageUrl}
                alt={`Banner de ${titulo || 'página'}`}
                class="object-cover object-center w-full h-full"
                style="z-index: -1;"
            />
        ) : (
            <!-- Fallback si no hay imagen válida -->
            <div class="w-full h-full bg-azulprimario"></div>
        )}
    </div>
    <div class="absolute inset-0 bg-black opacity-60    "></div>
    <!-- Dark overlay -->
    <div
        class="absolute inset-9 flex flex-col md:flex-row font-fuenteprincipal"
    >
        <div class="h-1/2 md:w-1/2 mb-4 md:mb-0">
            {titulo && (
                <h1
                    class="text-white font-bold text-2xl md:text-3xl xl:text-5xl p-6 md:p-10 leading-tight"
                >
                    {titulo}
                </h1>
            )}
        </div>
        <div
            class="flex justify-center items-center h-full md:h-auto md:w-1/2"
        >
            
        </div>
    </div>
</section>